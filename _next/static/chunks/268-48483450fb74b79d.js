"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{7268:function(e,t,s){s.d(t,{Z:function(){return H}});var l=s(5893),n=s(7294);let a=["#8a2be2","#ff69b4","#1e90ff","#008080","#00d3d3","#cdcd00","#ffa500","#ff0000","#008000","#ff4500","#32cd32","#ff1493","#9932cc","#20b2aa","#ff6347","#4169e1","#2e8b57","#8b4513","#00ffff","#ffd700","#4b0082","#ff8c00","#dc143c","#556b2f"];var i=e=>{let t=(0,n.useMemo)(()=>{let t={};return e.forEach((e,s)=>{t[e]=a[s%a.length]}),t},[e]);return(0,n.useCallback)((e,s)=>s&&s!==e?"lightgray":t[e],[t])},r=s(6524);let o={},c={Argument:"議論","Original comment":"元のコメント","Representative arguments":"代表的な議論","Open full-screen map":"全画面地図を開く","Back to report":"レポートに戻る","Hide labels":"ラベルを非表示にする","Show labels":"ラベルを表示","Show filters":"フィルターを表示","Hide filters":"フィルターを非表示","Min. votes":"最小投票数",Consensus:"コンセンサス",Showing:"表示中",arguments:"議論","Reset zoom":"ズームをリセット","Click anywhere on the map to close this":"このメッセージを閉じるには地図のどこかをクリックしてください","Click on the dot for details":"詳細を見るには点をクリックしてください",agree:"同意する",disagree:"同意しない",Language:"言語",English:"英語","of total":"合計",Overview:"概要","Cluster analysis":"クラスター分析","Representative comments":"代表的なコメント",Introduction:"導入",Clusters:"クラスター",Appendix:"付録","This report was generated using an AI pipeline that consists of the following steps":"このレポートは、以下のステップで構成されるAIパイプラインを使用して生成されました",Step:"ステップ",extraction:"抽出","show code":"コードを表示","hide code":"コードを非表示","show prompt":"プロンプトを表示","hide prompt":"プロンプトを非表示",embedding:"埋め込み",clustering:"クラスタリング",labelling:"ラベリング",takeaways:"まとめ",overview:"概要"};var d=(e,t,s)=>{let[l,a]=(0,n.useState)(0),i=(0,n.useMemo)(()=>{let t=null==e?void 0:e.translation;return null==t||t.languages,null==t||t.flags,[{name:"日本語",flag:"JP"}]},[]),d=(0,n.useMemo)(()=>"TW"===i[l].flag?r.dS({from:"cn",to:"twp"}):e=>e,[i[l].flag]),{replaceAll:m,manualChanges:u}=(0,n.useMemo)(()=>{var t;let l={},n=(null==e?void 0:null===(t=e.visualization)||void 0===t?void 0:t.replacements)||[],a=[],i=!0,r=e=>{if(0===n.length)return e;if(l[e])return l[e];let t=e;return n.forEach(e=>{let{replace:s,by:l}=e;t=t.split(s).join(l)}),i&&t!==e&&a.push({from:e,to:t}),l[e]=t,t};return s.forEach(e=>{r(e.cluster),r(e.takeaways||""),e.arguments.forEach(e=>{r(e.argument)})}),i=!1,{replaceAll:r,manualChanges:a}},[l]),h=(0,n.useCallback)(e=>{var s;if(!e)return e;let n=null===(s=t[e])||void 0===s?void 0:s[l];return n?c[e]||d(m(n)):(o[e]||(o[e]=!0),m(e))},[l,m]);return{languages:i,setLangIndex:a,langIndex:l,t:h,manualChanges:u}};let m=e=>{let{className:t}=e;return(0,l.jsx)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.5c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75A2.25 2.25 0 0116.5 4.5c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23H5.904M14.25 9h2.25M5.904 18.75c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 01-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 10.203 4.167 9.75 5 9.75h1.053c.472 0 .745.556.5.96a8.958 8.958 0 00-1.302 4.665c0 1.194.232 2.333.654 3.375z"})})},u=e=>{let{className:t}=e;return(0,l.jsx)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 15h2.25m8.024-9.75c.011.05.028.1.052.148.591 1.2.924 2.55.924 3.977a8.96 8.96 0 01-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398C20.613 14.547 19.833 15 19 15h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 00.303-.54m.023-8.25H16.48a4.5 4.5 0 01-1.423-.23l-3.114-1.04a4.5 4.5 0 00-1.423-.23H6.504c-.618 0-1.217.247-1.605.729A11.95 11.95 0 002.25 12c0 .434.023.863.068 1.285C2.427 14.306 3.346 15 4.372 15h3.126c.618 0 .991.724.725 1.282A7.471 7.471 0 007.5 19.5a2.25 2.25 0 002.25 2.25.75.75 0 00.75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 002.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384"})})};var h=e=>{let{video:t,timestamp:s,interview:n,showThumbnail:a,showVideo:i}=e;if(!t||!s||!n)return null;if(!t.includes("vimeo.com"))return console.error("Only Vimeo videos are supported at this time."),!1;let r=t.split("/"),o=r[r.length-1],[c,d,m]=s.split(":").map(Number);return(0,l.jsxs)("div",{className:"my-4",children:[(a||i)&&(0,l.jsx)("div",{className:"text-sm font-semibold mb-1",children:"Source video:"}),a&&(0,l.jsx)("img",{className:"mt-2",width:"320",height:"240",src:"https://vumbnail.com/".concat(o,".jpg"),alt:""}),i&&(0,l.jsx)("iframe",{src:"https://player.vimeo.com/video/".concat(o,"#t=").concat(3600*c+60*d+m,"s"),width:"320",height:"240",allow:"autoplay; fullscreen; picture-in-picture"})]})},p=e=>{let{point:t,dimensions:s,expanded:a,zoom:i,fullScreen:r,translator:o}=e,{scaleX:c,scaleY:d,width:p,height:x}=s,[g,v]=(0,n.useState)(!1),{zoomX:f,zoomY:j}=i,w=f(c(t.x)),b=j(d(t.y)),{t:y}=o,N={};return N=r?a?{...w>p/2?{right:p-w}:{left:w},top:0,height:s.height-40,overflowY:"auto"}:{...w>p/2?{right:p-w}:{left:w},...b>x/2?{bottom:x-b}:{top:b},pointerEvents:"none"}:{left:p-20,top:-20,height:a?x:"auto",overflowY:a?"auto":"hidden"},(0,l.jsxs)("div",{className:"text-left absolute p-4 bg-blue-100 shadow-sm m-5 w-[430px] transition-all duration-300",style:N,children:[(0,l.jsx)("div",{className:"text-sm font-bold",style:{color:t.color},children:y(t.cluster)}),(0,l.jsx)("div",{className:"text-lg my-2",children:y(t.argument)}),(t.agrees||t.disagrees)&&(0,l.jsxs)("div",{className:"text-sm opacity-80 mb-2 font-bold",children:[(0,l.jsx)(m,{className:"w-4 inline-block"})," ",t.agrees,(0,l.jsx)(u,{className:"w-4 inline-block ml-3"}),"  ",t.disagrees]}),(0,l.jsx)(h,{...t,showVideo:!1,showThumbnail:!a}),a?(0,l.jsxs)("div",{children:[(0,l.jsx)(h,{...t,showVideo:!0,showThumbnail:!1}),(0,l.jsxs)("div",{className:"text-sm opacity-80 mt-2",children:[(0,l.jsxs)("span",{className:"font-semibold",children:[y(t.video?"Transcript":"Original comment"),":"]}),'"',t.comment.length>100&&!g?(0,l.jsxs)("span",{children:[t.comment.slice(0,200)+'..."',(0,l.jsx)("span",{className:"underline cursor-pointer",onClick:()=>v(!0),children:y("read more")})]}):t.comment+'"']}),(0,l.jsx)("div",{className:"text-xs opacity-50 italic mt-4",children:y("Click anywhere on the map to close this")})]}):(0,l.jsx)("div",{className:"text-xs opacity-50 italic",children:y(t.video?"Click on the dot to see original video and transcript":"Click on the dot for details")})]})};let x=(e,t,s)=>{console.log("getDimensions",window.innerWidth);let l=window.innerWidth<500?{width:window.innerWidth-100,height:window.innerWidth-100,padding:10}:{width:e||window.innerWidth,height:t||window.innerHeight,padding:s||30};return console.log(l),{...l,scaleX:e=>l.padding+e*(l.width-2*l.padding),scaleY:e=>l.padding+e*(l.height-2*l.padding)}};var g=(e,t,s)=>{let[l,a]=(0,n.useState)(x(e,t,s));return(0,n.useEffect)(()=>{let l=()=>{a(x(e,t,s))};return window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[]),l},v=e=>{let t=e.map(e=>e.arguments).flat(),s=t.map(e=>e.x),l=t.map(e=>e.y),n=Math.min(...s),a=Math.min(...l),i=Math.max(...s),r=Math.max(...l);return e.map(e=>{let t=e.arguments.map(e=>{let t=(e.x-n)/(i-n),s=(e.y-a)/(r-a);return{...e,x:t,y:s}});return{...e,arguments:t}})},f=s(8294),j=function(e,t,s,l,a,i){let r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:30;return(0,n.useMemo)(()=>{if(!a)return()=>null;let{width:n,height:o,scaleX:c,scaleY:d}=a,m=e.flatMap(e=>e.arguments.map(l=>({...l,...e,...t[l.comment_id],color:s(e.cluster_id)}))),u=(0,f.Z)({x:e=>c(e.x),y:e=>d(e.y),width:n,height:o})(m);return e=>{let t=e.target.getBoundingClientRect(),s=l.unZoomX(e.clientX-t.left),n=l.unZoomY(e.clientY-t.top),a=u.find(s,n,r);return i&&a&&a.data.cluster_id!==i?null:a}},[e,a])},w=e=>(0,n.useMemo)(()=>{var t;let{config:s,comments:l}=e,n=l[Object.keys(l)[0]],a=(null===(t=s.translation)||void 0===t?void 0:t.languages)||[];return{dataHasVotes:n.hasOwnProperty("agrees"),hasTranslations:a.length>0}},[]),b=(e,t)=>{let[s,l]=(0,n.useState)({scale:1,panx:0,pany:0}),[a,i]=(0,n.useState)(!1),[r,o]=(0,n.useState)({x:0,y:0}),[c,d]=(0,n.useState)(!1),[m,u]=(0,n.useState)(!1),h=e=>{if(!t||m)return;let n=e.target.getBoundingClientRect(),a=e.clientX-n.left,i=e.clientY-n.top,r=Math.max(.2,Math.min(5,s.scale-e.deltaY/1e3)),o=a-(a-s.panx)*(r/s.scale),c=i-(i-s.pany)*(r/s.scale);l({scale:r,panx:o,pany:c})},p=e=>{if(!t||m)return;let s=e.target.getBoundingClientRect(),l=e.clientX-s.left,n=e.clientY-s.top;i(!0),o({x:l,y:n}),d(!1)},x=(e,n)=>i=>{if(e(i),!t||m||!a)return;n();let c=i.target.getBoundingClientRect(),u=i.clientX-c.left,h=i.clientY-c.top,p=s.panx+(u-r.x),x=s.pany+(h-r.y);o({x:u,y:h}),d(!0),l({...s,panx:p,pany:x})},g=e=>t=>{c||e(t),i(!1)},v=(1!=s.scale||0!=s.panx||0!=s.pany)&&(()=>{l({scale:1,panx:0,pany:0})});return{...s,events:e=>{let{onMove:t,onDrag:s,onClick:l}=e;return{onWheel:h,onMouseDown:p,onMouseMove:x(t,s),onMouseUp:g(l)}},dragging:a,zoomX:e=>e*s.scale+s.panx,zoomY:e=>e*s.scale+s.pany,unZoomX:e=>(e-s.panx)/s.scale,unZoomY:e=>(e-s.pany)/s.scale,reset:v,disable:()=>u(!0),enable:()=>u(!1)}},y=(e,t,s,l,a)=>{let i=(0,n.useCallback)(e=>{if(!a)return!0;let n=t[e.comment_id],i=n.agrees+n.disagrees,r=100*Math.max(n.agrees,n.disagrees)/i;return i>=s&&r>=l},[s,l]),r=(0,n.useMemo)(()=>{let t=0,s=0;return e.forEach(e=>e.arguments.forEach(e=>{t++,!i(e)&&s++})),{total:t,filtered:s}},[i]);return{filter:i,...r}};let N=e=>e.reduce((e,t)=>e+t,0)/e.length,k=()=>"ontouchstart"in window||navigator.maxTouchPoints>0;var C=function(e){let{fullScreen:t,back:s,onlyCluster:a,comments:i,translator:r,color:o}=e,{dataHasVotes:c}=w(e),d=g(e.width,e.height),m=v(e.clusters),u=b(d,t),h=j(m,e.comments,o,u,d,a),[x,f]=(0,n.useState)(null),[C,S]=(0,n.useState)(!1),[M,_]=(0,n.useState)(!0),[E,Y]=(0,n.useState)(!1),[z,O]=(0,n.useState)(0),[T,I]=(0,n.useState)(50),H=y(m,i,z,T,c);if(!d)return console.log("NO DIMENSIONS???"),(0,l.jsx)("div",{className:"m-auto bg-blue-50",style:{width:e.width,height:e.height}});let{scaleX:A,scaleY:R,width:X,height:B}=d,{t:L}=r;return(0,l.jsxs)("div",{className:"m-auto relative bg-blue-50",style:{width:X,height:B,overflow:t?"hidden":"visible"},onMouseLeave:()=>{C||f(null)},children:[(0,l.jsx)("svg",{width:X,height:B,...k()?{}:u.events({onClick:e=>{if(x&&!C)S(!0),u.disable();else{var t;S(!1),f((null===(t=h(e))||void 0===t?void 0:t.data)||null),u.enable()}},onMove:e=>{if(!C){var t;f((null===(t=h(e))||void 0===t?void 0:t.data)||null)}},onDrag:()=>{f(null)}}),children:m.map(e=>e.arguments.filter(H.filter).map(t=>{let{arg_id:s,x:n,y:i}=t;return(0,l.jsx)("circle",{className:"pointer-events-none",id:s,cx:u.zoomX(A(n)),cy:u.zoomY(R(i)),fill:o(e.cluster_id,a),opacity:C&&(null==x?void 0:x.arg_id)!==s?.3:1,r:(null==x?void 0:x.arg_id)===s?8:4},s)}))}),t&&M&&!u.dragging&&(0,l.jsx)("div",{children:m.map(e=>(0,l.jsx)("div",{className:"absolute opacity-90 bg-white p-2 max-w-lg rounded-lg pointer-events-none select-none transition-opacity duration-300",style:{transform:"translate(-50%, -50%)",left:u.zoomX(A(N(e.arguments.map(e=>{let{x:t}=e;return t})))),top:u.zoomY(R(N(e.arguments.map(e=>{let{y:t}=e;return t})))),color:o(e.cluster_id,a),opacity:C?.3:(null==x?void 0:x.cluster_id)==e.cluster_id?0:.85},children:L(e.cluster)},e.cluster_id))}),x&&(0,l.jsx)(p,{point:x,dimensions:d,zoom:u,expanded:C,fullScreen:t,translator:r}),t&&(0,l.jsxs)("div",{className:"absolute top-0 left-0",children:[(0,l.jsxs)("button",{className:"m-2 underline",onClick:s,children:[" ",L("Back to report")]}),(0,l.jsx)("button",{className:"m-2 underline",onClick:()=>_(e=>!e),children:M?L("Hide labels"):L("Show labels")}),u.reset&&(0,l.jsxs)("button",{className:"m-2 underline",onClick:u.reset,children:[" ",L("Reset zoom")]}),c&&(0,l.jsx)("button",{className:"m-2 underline",onClick:()=>{Y(e=>!e)},children:E?L("Hide filters"):L("Show filters")}),E&&(0,l.jsxs)("div",{className:"absolute w-[400px] top-12 left-2 p-2 border bg-white rounded leading-4",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("button",{className:"inline-block m-2 text-left",children:[L("Votes")," ",">"," ",(0,l.jsx)("span",{className:"inline-block w-10",children:z})]}),(0,l.jsx)("input",{className:"inline-block w-[200px] mr-2",id:"min-votes-slider",type:"range",min:"0",max:"50",value:z,onInput:e=>{O(parseInt(e.target.value))}})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("button",{className:"inline-block m-2 text-left",children:[L("Consensus")," ",">"," ",(0,l.jsxs)("span",{className:"inline-block w-10",children:[T,"%"]})]}),(0,l.jsx)("input",{className:"inline-block w-[200px] mr-2",id:"min-votes-slider",type:"range",min:"50",max:"100",value:T,onInput:e=>{I(parseInt(e.target.value))}})]}),(0,l.jsxs)("div",{className:"text-sm ml-2 mt-2 opacity-70",children:[L("Showing")," ",H.filtered,"/",H.total," ",L("arguments")]})]})]})]})},S=e=>{let{config:t}=e,{t:s,languages:n,langIndex:a,setLangIndex:i}=e.translator,{hasTranslations:r}=w(e);return(0,l.jsx)("div",{className:"fixed top-0 w-full h-7 bg-gradient-to-r from-blue-900 to-white z-10 leading-7",children:(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("div",{className:"text-white mx-2",children:"Talk to the City"}),r&&(0,l.jsx)("div",{children:n.map((e,t)=>(0,l.jsx)("button",{className:"text-white mx-2",style:{opacity:a===t?1:.7},onClick:()=>i(t),children:(0,l.jsx)("img",{className:"w-5 inline-block leading-5 pb-[4px] hover:shadow-2xl shadow-white",src:"https://purecatamphetamine.github.io/country-flag-icons/3x2/".concat(e.flag,".svg"),alt:""})},e.name))})]})})},M=s(9295);let _=e=>{let{conf:t,t:s,step:a,i}=e,[r,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1);return(0,l.jsxs)("div",{children:[s("Step")," ",i+1,": ",(0,l.jsx)("span",{className:"font-bold",children:s(a)})," - ",(0,l.jsx)("span",{className:"underline cursor-pointer",onClick:()=>o(e=>!e),children:s(r?"hide code":"show code")}),t.prompt&&(0,l.jsxs)("span",{children:[", ",(0,l.jsx)("span",{className:"underline mr-2 cursor-pointer",onClick:()=>d(e=>!e),children:s(c?"hide prompt":"show prompt")}),"(",t.model,")"]}),(0,l.jsxs)("div",{children:[r&&(0,l.jsx)("div",{className:"my-4 border rounded p-4 bg-gray-50",children:(0,l.jsx)("pre",{className:"text-xs",children:t.source_code})}),c&&(0,l.jsx)("div",{className:"my-4 border rounded p-4 bg-gray-50",children:(0,l.jsx)("pre",{className:"text-xs whitespace-pre-wrap",children:t.prompt})})]})]},a)},E=e=>{let{manualChanges:t,t:s}=e,[a,i]=(0,n.useState)([]),[r,o]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{i(t)},[]),a.length>0&&(0,l.jsxs)("div",{className:"mt-8",children:[s("Some manual changes were also made to the report"),":"," ",(0,l.jsxs)("span",{className:"underline mr-2 cursor-pointer",onClick:()=>o(e=>!e),children:[s(r?"hide changes":"show changes"),a&&a.length>0&&" (".concat(a.length,")")]}),r&&(0,l.jsx)("ul",{className:"text-left list-outside list-disc ml-6 mt-4",children:a.map((e,t)=>(0,l.jsx)("li",{children:(0,M.NV)(e.from,e.to).map((e,s)=>(0,l.jsxs)("span",{children:[e.added&&(0,l.jsx)("span",{className:"bg-green-200",children:e.value}),e.removed&&(0,l.jsx)("span",{className:"bg-red-200 line-through",children:e.value}),!e.added&&!e.removed&&(0,l.jsx)("span",{children:e.value.length<163?e.value:e.value.slice(0,80)+" ... "+e.value.slice(e.value.length-80)})]},"".concat(t,"/").concat(s)))},t))})]})};var Y=e=>{let{config:t,translator:s}=e,{t:n,manualChanges:a}=s;return(0,l.jsxs)("div",{id:"appendix",children:[(0,l.jsx)("hr",{className:"h-px my-8 bg-gray-600 border-0 dark:bg-gray-700"}),(0,l.jsx)("h2",{className:"text-3xl font-bold my-4 border-t-black",children:n("Appendix")}),(0,l.jsxs)("div",{className:"text-left mt-8",children:[n("This report was generated using an AI pipeline that consists of the following steps"),":",(0,l.jsx)("div",{className:"text-left list-outside list-disc ml-6 mt-4",children:["extraction","embedding","clustering","labelling","takeaways","overview"].map((e,s)=>(0,l.jsx)(_,{conf:t[e],t:n,step:e,i:s},s))}),(0,l.jsx)(E,{manualChanges:a,t:n})]})]})};let z=e=>{let{name:t,target:s,small:n}=e,a="opacity-60 hover:opacity-100 cursor-pointer";return n&&(a+=" text-xs ml-2  max-w-xs  line-clamp-1 leading-6"),(0,l.jsx)("h2",{className:a,onClick:()=>{let e=document.getElementById(s);window.scrollTo({top:e.offsetTop-50,behavior:"smooth"})},children:t})};var O=e=>{let{clusters:t,translator:s}=e,{t:n}=s;return(0,l.jsx)("div",{className:"hidden xl:block fixed left-0 top-0 h-full text-left mt-8 opacity-40 hover:opacity-100 leading-10 transition-all",children:(0,l.jsxs)("div",{className:"text-left list-outside list-disc ml-2 mt-4",children:[(0,l.jsx)(z,{name:n("Introduction"),target:"introduction"}),(0,l.jsx)(z,{name:n("Clusters"),target:"clusters"}),t.map((e,t)=>(0,l.jsx)(z,{small:!0,name:n(e.cluster),target:"cluster-"+e.cluster_id},t)),(0,l.jsx)(z,{name:n("Appendix"),target:"appendix"})]})})},T=s(1794);let I=new(s.n(T)()).Converter;var H=function(e){let[t,s]=(0,n.useState)(null),{config:a,clusters:r,translations:o,overview:c}=e,m=i(r.map(e=>e.cluster_id)),u=(0,n.useRef)(0),h=d(a,o,r),[p,x]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{x(!0)},[]),!p)return!1;let{t:g}=h,v=r.map(e=>e.arguments.length).reduce((e,t)=>e+t,0);return t?(0,l.jsx)(C,{...e,color:m,translator:h,back:()=>{s(null),setTimeout(()=>window.scrollTo({top:u.current}),0)},fullScreen:!0,onlyCluster:"main"!==t?t:void 0}):(0,l.jsxs)("div",{className:"mt-9",children:[(0,l.jsx)(O,{clusters:r,translator:h}),(0,l.jsx)(S,{...e,translator:h}),(0,l.jsxs)("div",{className:"text-center max-w-3xl m-auto py-8 px-5",style:{display:t?"none":"block"},children:[(0,l.jsx)("h2",{className:"text-xl my-3 font-bold",children:g(a.name)}),(0,l.jsx)("h1",{className:"text-3xl my-3 mb-10",children:g(a.question)}),(0,l.jsxs)("div",{id:"introduction",className:"my-4",children:[a.intro&&(0,l.jsx)("div",{className:"max-w-xl m-auto mb-4 text-justify italic",dangerouslySetInnerHTML:{__html:I.makeHtml(g(a.intro))}}),(0,l.jsxs)("div",{id:"big-map",children:[(0,l.jsx)(C,{...e,translator:h,color:m,width:450,height:450}),(0,l.jsx)("button",{className:"my-2 underline",onClick:()=>{k()?alert("Our interactive maps are not yet available on touch devices. Please try again from a desktop computer."):(u.current=window.scrollY,s("main"))},children:g("Open full-screen map")})]}),(0,l.jsxs)("div",{id:"overview",className:"text-left font-bold my-3",children:[g("Overview"),":"]}),(0,l.jsx)("div",{className:"text-left",children:g(c)})]}),(0,l.jsx)("div",{id:"clusters",children:r.sort((e,t)=>t.arguments.length-e.arguments.length).map(t=>(0,l.jsxs)("div",{id:"cluster-".concat(t.cluster_id),children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold my-2 mt-12",style:{color:m(t.cluster_id)},children:g(t.cluster)}),(0,l.jsxs)("div",{className:"text-lg opacity-50 mb-3",children:["(",t.arguments.length," ",g("arguments"),",",Math.round(100*t.arguments.length/v),"% ",g("of total"),")"]}),(0,l.jsxs)("div",{className:"text-left font-bold my-3",children:[g("Cluster analysis"),":"]}),(0,l.jsx)("div",{className:"text-left",children:g(t.takeaways)}),(0,l.jsxs)("div",{className:"my-4",children:[(0,l.jsx)(C,{...e,translator:h,color:m,width:350,height:350,onlyCluster:g(t.cluster_id)}),(0,l.jsx)("button",{className:"my-2 underline",onClick:()=>{k()?alert("Our interactive maps are not yet available on touch devices. Please try again from a desktop computer."):(u.current=window.scrollY,s(t.cluster_id))},children:g("Open full-screen map")})]}),(0,l.jsxs)("div",{className:"text-left font-bold my-3",children:[g("Representative comments"),":"]}),(0,l.jsx)("ul",{className:"text-left list-outside list-disc ml-6 ",children:t.arguments.sort((e,t)=>t.p-e.p).slice(0,5).map((e,t)=>(0,l.jsx)("li",{className:"italic",children:g(e.argument)},t))})]},t.cluster_id))}),(0,l.jsx)(Y,{config:a,translator:h})]})]})}}}]);